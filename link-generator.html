<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script language="javascript">
function escapeHTML(html)
{
  return document.createElement('div')
    .appendChild(document.createTextNode(html))
    .parentNode;
}

function encode(form)
{
  let parameters = form.parameters.value.split(/\s+/);

  let value = "graphia://v1";
  let text = "";

  for(let parameter of parameters)
  {
    let filename = parameter.split('/').pop().split('#')[0].split('?')[0];
    if(filename.length > 0)
    {
      if(text.length > 0)
        text += " ";

      text += filename;
    }

    value += "/" + encodeURIComponent(parameter);
  }

  let a = document.createElement("a");
  a.setAttribute("href", value);
  a.innerText = text.length > 0 ? text : value;

  let links = document.getElementById("links");
  links.appendChild(a);
  links.appendChild(escapeHTML(a.outerHTML));
  links.appendChild(document.createElement("br"));
}
      </script>

    </head>
    <body>
      <div class="jumbotron text-center">
        <h1>Graphia Link Generator</h1>
        <p>Enter one or more URLs below</p>
      </div>
      <div class="container">
        <form action="" method="get">
          <input class="form-control input-sm" type="text" name="parameters" value="">
          <input class="form-control" type="button" value="Encode" onclick="encode(this.form)">
        </form>
        <div id="links"></div>
      </div>
    </body>
</html>
